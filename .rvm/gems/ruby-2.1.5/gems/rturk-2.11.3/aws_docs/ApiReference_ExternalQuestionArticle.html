<html xmlns:fo="http://www.w3.org/1999/XSL/Format"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>ExternalQuestion</title><link rel="stylesheet" href="aws-docs-IE.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><link rel="home" href="#top" title="Amazon Mechanical Turk"><link rel="up" href="ApiReference_QuestionAnswerDataArticle.html" title="Chapter&nbsp;7.&nbsp;Question and Answer Data"><link rel="prev" href="ApiReference_AnswerKeyDataStructureArticle.html" title="AnswerKey"><link rel="next" href="ApiReference_NotificationReceptorAPIArticle.html" title="Chapter&nbsp;8.&nbsp;The Notification Receptor API"><!--[if !IE]>--><link rel="stylesheet" href="aws-docs.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><!--<![endif]--><meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><script src="/urchin.js" type="text/javascript"></script><script type="text/javascript">
				urchinTracker();
			</script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="frameset.js"> //
		</script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header" cellspacing="0" cellpadding="2"><tr><td width="30%" align="left"><a accesskey="p" href="ApiReference_AnswerKeyDataStructureArticle.html"><img src="images/prev.gif" alt="Prev"></a> </td><td width="40%" align="center"><a href="http://survey.amazonwebservices.com/survey/s?s=559&amp;opdata_page=Mturk_API_2008-08-02_ApiReference_ExternalQuestionArticle">Documentation Feedback</a></td><td width="30%" align="right"> <a accesskey="n" href="ApiReference_NotificationReceptorAPIArticle.html"><img src="images/next.gif" alt="Next"></a></td></tr></table><div class="breadcrumb"><a href="Welcome.html">Welcome</a><a href=""></a> &raquo; <a href="ApiReference_QuestionAnswerDataArticle.html">Question and Answer Data</a> &raquo; <strong>ExternalQuestion</strong></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h1 class="topictitle">ExternalQuestion</h1></div></div></div><a class="indexterm" name="d0e20183"></a><a class="indexterm" name="d0e20186"></a><a class="indexterm" name="d0e20191"></a><a class="indexterm" name="d0e20196"></a><a class="indexterm" name="d0e20199"></a><div class="highlights"><p><strong>Topics</strong></p><ul><li><a href="ApiReference_ExternalQuestionArticle.html#d0e20203">Description</a></li><li><a href="ApiReference_ExternalQuestionArticle.html#d0e20266">The ExternalQuestion Data Structure</a></li><li><a href="ApiReference_ExternalQuestionArticle.html#d0e20355">Example</a></li><li><a href="ApiReference_ExternalQuestionArticle.html#d0e20370">The External Form</a></li><li><a href="ApiReference_ExternalQuestionArticle.html#d0e20498">The Answer Data</a></li><li><a href="ApiReference_ExternalQuestionArticle.html#d0e20531">Guidelines For Using External Questions</a></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d0e20203">Description</h2></div></div></div><p> Instead of providing a <a class="link" href="ApiReference_QuestionFormDataStructureArticle.html" title="QuestionForm">QuestionForm data structure</a> that tells Amazon Mechanical Turk how to display your questions
			and collect answers, you can host the questions on your own web site using an "external" question. </p><p> A HIT with an external question displays a web page from your web site in a frame in the
			Worker's web browser. Your web page displays a form for the Worker to fill out and submit. The
			Worker submits results using your form, and your form submits the results back to Amazon Mechanical Turk.
			Using your web site to display the form gives your web site control over how the question appears
			and how answers are collected. </p><p> To use an external question with a HIT, you provide a <em class="parameter"><code>ExternalQuestion</code></em>
			data structure as the value of the <em class="parameter"><code>Question</code></em> parameter. As with the
				<em class="parameter"><code>QuestionForm</code></em> data structure, an <em class="parameter"><code>ExternalQuestion</code></em>
			is a string value that consists of XML data. This data must conform to the
				<em class="parameter"><code>ExternalQuestion</code></em> schema. See <a class="link" href="ApiReference_WsdlLocationArticle.html" title="Chapter&nbsp;3.&nbsp;WSDL and Schema Locations">WSDL and Schema Locations</a>
			for the location of this schema. For more information about using XML data as a parameter or
			return value, see <a class="link" href="ApiReference_XMLParameterValuesArticle.html" title="Using XML Parameter Values">Using XML Parameter
				Values</a>. </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p> You can only use an external question as the question of a HIT. You cannot use an external
				question with a Qualification test. </p></td></tr></table></div><p> The <em class="parameter"><code>ExternalQuestion</code></em> data structure is used as a parameter value for the
			following operations: </p><div class="itemizedlist"><ul type="disc"><li><p>
					<code class="function">CreateHIT</code>
				</p></li></ul></div><p> The <em class="parameter"><code>ExternalQuestion</code></em> data structure is a value in a <a class="link" href="ApiReference_HITDataStructureArticle.html" title="HIT">HIT data structure</a>. </p><p> All elements in a <em class="parameter"><code>ExternalQuestion</code></em> belong to a namespace whose name is
			identical to the URL of the <em class="parameter"><code>ExternalQuestion</code></em> schema document for the
			version of the API you are using. </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d0e20266">The ExternalQuestion Data Structure</h2></div></div></div><p> The <em class="parameter"><code>ExternalQuestion</code></em> data structure has a root element of
				<strong class="userinput"><code>ExternalQuestion</code></strong>. </p><p> The <strong class="userinput"><code>ExternalQuestion</code></strong> element contains the following elements: </p><div class="informaltable"><table cellspacing="0" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>Name</th><th>Description</th><th>Required</th></tr></thead><tbody><tr><td>
							<p class="simpara">
								<em class="parameter"><code>ExternalURL</code></em>
							</p>
						</td><td>
							<p class="simpara"> The URL of your web form, to be displayed in a frame in the Worker's web
								browser. </p>
							<p class="simpara">Type: URL</p>
							<p class="simpara">Default: None</p>
							<p class="simpara"> Amazon Mechanical Turk appends two parameters to this URL:
								<code class="code">hitId</code> and <code class="code">assignmentId</code>. See below for more
								information. </p>
						</td><td>
							<p class="simpara">Yes</p>
						</td></tr><tr><td>
							<p class="simpara">
								<em class="parameter"><code>FrameHeight</code></em>
							</p>
						</td><td>
							<p class="simpara">The height of the frame, in pixels</p>
							<p class="simpara">Type: Integer</p>
							<p class="simpara">Default: None</p>
						</td><td>
							<p class="simpara">Yes</p>
						</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d0e20355">Example</h2></div></div></div><p> The following is an example of a complete <em class="parameter"><code>ExternalQuestion</code></em> data
			structure. Remember that to pass this structure in as the value of a parameter to an operation,
			XML characters must be escaped as character entities. (See <a class="link" href="ApiReference_XMLParameterValuesArticle.html" title="Using XML Parameter Values">Using XML Parameter Values</a> for more information.) </p><pre class="programlisting">&lt;ExternalQuestion xmlns="<em class="replaceable"><code>[the ExternalQuestion schema URL]</code></em>"&gt;
  &lt;ExternalURL&gt;http://tictactoe.amazon.com/gamesurvey.cgi?gameid=01523&lt;/ExternalURL&gt;
  &lt;FrameHeight&gt;400&lt;/FrameHeight&gt;
&lt;/ExternalQuestion&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d0e20370">The External Form</h2></div></div></div><p> When a Worker attempts to complete a HIT with an external question, the external web site is
			loaded into a frame in the middle of the screen. The web page at that URL should display a form
			for the Worker to fill out, and all the information the Worker will need to complete the HIT. </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title" id="d0e20375">The Frame's URL and Parameters</h3></div></div></div><p> The URL used for the frame is the <em class="parameter"><code>ExternalURL</code></em> of the question with
				two parameters appended: the <code class="code">hitId</code> and the <code class="code">assignmentId</code>. These
				parameters are appended CGI-style: The full URL has a question mark (<code class="code">?</code>) before
				the first parameter, and an ampersand (<code class="code">&amp;</code>) between each parameter, with
				each parameter consisting of a name, an equal sign (<code class="code">=</code>), and a value. Other
				parameters already present in this style in <em class="parameter"><code>ExternalURL</code></em> are preserved,
				so the final URL will only have one question mark, and all parameters will be separated by
				ampersands. </p><p> For example, consider an <em class="parameter"><code>ExternalURL</code></em> of: </p><pre class="programlisting">http://tictactoe.amazon.com/gamesurvey.cgi?gameid=01523</pre><p> With this <em class="parameter"><code>ExternalURL</code></em>, the full URL used for the page in the frame
				could be as follows: </p><pre class="programlisting">http://tictactoe.amazon.com/gamesurvey.cgi?gameid=01523
&amp;hitId=123RVWYBAZW00EXAMPLE
&amp;assignmentId=123RVWYBAZW00EXAMPLE456RVWYBAZW00EXAMPLE</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title" id="d0e20415">Preview Mode</h3></div></div></div><p> Your external question will be displayed when a Worker previews the HIT on the Amazon
				Amazon Mechanical Turk web site, before the Worker has clicked the "Accept HIT" button. When the HIT
				is being previewed, the URL will have a special value for the <code class="code">assignmentId</code>:
					<code class="code">ASSIGNMENT_ID_NOT_AVAILABLE</code>
			</p><p> When a Worker previews a HIT, your web page should show her everything she will need to do
				to complete the HIT, so she can decide whether or not to accept it. The easiest way to do this
				is to simply display the form as it would appear when the HIT is accepted. However, you may
				want to take precautions to prevent a Worker from accidentally filling out or submitting your
				form prior to accepting the HIT. </p><p> You can use JavaScript or server-side logic to check the <code class="code">assignmentId</code>
				parameter, and change the display the form if the HIT is being previewed
					(<code class="code">assignmentId=ASSIGNMENT_ID_NOT_AVAILABLE</code>). </p><p> If a Worker submits your form before accepting the HIT, and your form attempts to post the
				data back to Amazon Mechanical Turk, Amazon Mechanical Turk will display an error message to the Worker, and
				the results will not be accepted. </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title" id="d0e20438">The Form Action</h3></div></div></div><p> The form on the external web site must post the result data back to Amazon Mechanical Turk
				using the following URL: </p><pre class="programlisting">http://www.mturk.com/mturk/externalSubmit</pre><p> The form must include the <code class="code">assignmentId</code> field that was appended to the URL used
				to access your form. It should be submitted along with the other form fields submitted by your
				form, with a name of <code class="code">assignmentId</code> and the same value as was passed to the form.
				Be sure to spell the field name as it appears here, with the same letters uppercase and
				lowercase. </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p> The field names <code class="code">assignmentId</code> and <code class="code">hitId</code> are reserved for
					special purposes. Your form only needs to submit the <code class="code">assignmentId</code> field. Any
					data submitted with a field name of "<code class="code">hitId</code>" will be ignored, and will not
					appear in the results data for the HIT. </p></td></tr></table></div><p> The form can submit data to that URL using either the "GET" or "POST" methods. The data the
				form submits should be name-value pairs in the CGI-style: </p><div class="itemizedlist"><ul type="disc"><li><p> Each field appears as the name, an equal sign, and the value. For example:
							<code class="code">favoriteColor=blue</code>
					</p></li><li><p> Data that appears in the posted URL (using the "GET" method or the form's action
						URL) is preceded by a question mark (<code class="code">?</code>), and is delimited by ampersands
							(<code class="code">&amp;</code>). For example: </p><pre class="programlisting">http://www.mturk.com/mturk/externalSubmit?favoriteColor=blue&amp;favoriteNumber=7&amp;...</pre></li><li><p> Data that appears in the HTTP message body (using the "POST" method) has one data
						pair per line. For example: </p><pre class="programlisting">favoriteColor=blue
favoriteNumber=7
...</pre></li></ul></div><p> The easiest way to post the data in the CGI-style is to use an HTML form on the web page,
				with the <code class="code">externalSubmit</code> URL as the "action," and either "GET" or "POST" as the
				"method." </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d0e20498">The Answer Data</h2></div></div></div><p> When the Worker submits your form, the form sends the field data to Amazon Mechanical Turk using the
				<code class="code">externalSubmit</code> URL, and Amazon Mechanical Turk records the field data as the results of
			the HIT. </p><p> When you retrieve the results using <a class="link" href="ApiReference_GetAssignmentsForHITOperation.html" title="GetAssignmentsForHIT">the <code class="function">GetAssignmentsForHIT</code> operation</a>, the field data submitted by
			your form will appear in the <em class="parameter"><code>Answer</code></em> of the <a class="link" href="ApiReference_AssignmentDataStructureArticle.html" title="Assignment">Assignment</a> as if each field were
			a free-text answer. The <em class="parameter"><code>QuestionIdentifier</code></em> element of the answer will be
			the name of the field, and the <em class="parameter"><code>FreeText</code></em> element will contain the value. </p><p> See the <a class="link" href="ApiReference_QuestionFormAnswersDataStructureArticle.html" title="QuestionFormAnswers">QuestionFormAnswers data format</a> for more information about the format of answer data.
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d0e20531">Guidelines For Using External Questions</h2></div></div></div><p> External questions give your application a great deal of power over how Workers submit results
			for your HITs. To ensure you get good results for your HITs, you should make sure your web server
			and web pages can provide your Workers with a quality experience. </p><p> Because external questions depend on your web server for rendering the question form, both
			while Workers are previewing HITs and while Workers are completing HITs, your server will need to
			be engineered for high availability. The Amazon Mechanical Turk web site gets heavy traffic, so
			your web server will need to be able to respond quickly and correctly when receiving many requests
			in a short period of time. </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>
				<a class="ulink" href="http://aws.amazon.com/s3" target="_blank">Amazon S3</a> offers high availability hosting of
				data, accessible via public URLs. You can host your external questions as web pages in Amazon
				S3, and not have to run your own high availability web server. </p></td></tr></table></div><p> Your web site can do many things inside the frame, but eventually it must cause the Worker's
			browser to load the "externalSubmit" URL in the frame with the results in POST data. The easiest
			way to do this is with an HTML form whose fields contain the HIT results, with a submit button
			that the Worker will click. If an external HIT prevents the Worker from submitting results back to
			Amazon Mechanical Turk using the "externalSubmit" mechanism, the Worker may not be able to claim rewards
			or continue doing work without restarting their session. Amazon Mechanical Turk reserves the right
			to remove any external HITs that are not functioning properly. </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p> Remember that a <a class="link" href="ApiReference_QuestionFormAnswersDataStructureArticle.html" title="QuestionFormAnswers">QuestionForm</a> can contain Java applets, Flash applications, and blocks of XHTML
				formatted content. If the capabilities of a QuestionForm meet the needs of your HIT, using a
				QuestionForm instead of an ExternalQuestion is the best way to ensure that your HIT will work
				correctly. </p></td></tr></table></div><p> Finally, please remember that external questions must meet the Amazon Mechanical Turk
			Participation Agreement, and otherwise meet Amazon Mechanical Turk's standards for appropriate content.
			Specifically, the Participation Agreement expressly prohibits the use of Amazon Mechanical Turk
			for advertising or solicitation. If your web site typically displays advertising to visitors,
			please make sure those advertisements do not appear in your external questions. Amazon Mechanical
			Turk reserves the right to remove HITs with inappropriate content. </p></div></div><div class="navfooter"><table width="100%" summary="Navigation footer" cellspacing="0" cellpadding="2"><tr><td width="30%" align="left"><a accesskey="p" href="ApiReference_AnswerKeyDataStructureArticle.html"><img src="images/prev.gif" alt="Prev"></a> </td><td width="40%" align="center"><a href="http://survey.amazonwebservices.com/survey/s?s=559&amp;opdata_page=Mturk_API_2008-08-02_ApiReference_ExternalQuestionArticle">Documentation Feedback</a><br><a href="copyrightinfo.html">Copyright Information</a></td><td width="30%" align="right"> <a accesskey="n" href="ApiReference_NotificationReceptorAPIArticle.html"><img src="images/next.gif" alt="Next"></a></td></tr><tr><td width="30%" align="left" valign="top">&nbsp;</td><td width="40%" align="center"><a accesskey="h" href="#top"><img src="images/home.gif" alt="Home"></a></td><td width="30%" align="right" valign="top">&nbsp;</td></tr></table></div></body></html>