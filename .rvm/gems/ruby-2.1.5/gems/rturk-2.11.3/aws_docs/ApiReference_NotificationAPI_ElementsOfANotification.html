<html xmlns:fo="http://www.w3.org/1999/XSL/Format"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Elements of a Notification Message</title><link rel="stylesheet" href="aws-docs-IE.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><link rel="home" href="#top" title="Amazon Mechanical Turk"><link rel="up" href="ApiReference_NotificationReceptorAPIArticle.html" title="Chapter&nbsp;8.&nbsp;The Notification Receptor API"><link rel="prev" href="ApiReference_NotificationAPI_BuildingANotificationReceptor.html" title="Building A Notification Receptor"><link rel="next" href="ApiReference_NotificationReceptorAPI_RESTTransportArticle.html" title="The REST Transport"><!--[if !IE]>--><link rel="stylesheet" href="aws-docs.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><!--<![endif]--><meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><script src="/urchin.js" type="text/javascript"></script><script type="text/javascript">
				urchinTracker();
			</script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="frameset.js"> //
		</script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header" cellspacing="0" cellpadding="2"><tr><td width="30%" align="left"><a accesskey="p" href="ApiReference_NotificationAPI_BuildingANotificationReceptor.html"><img src="images/prev.gif" alt="Prev"></a> </td><td width="40%" align="center"><a href="http://survey.amazonwebservices.com/survey/s?s=559&amp;opdata_page=Mturk_API_2008-08-02_ApiReference_NotificationAPI_ElementsOfANotification">Documentation Feedback</a></td><td width="30%" align="right"> <a accesskey="n" href="ApiReference_NotificationReceptorAPI_RESTTransportArticle.html"><img src="images/next.gif" alt="Next"></a></td></tr></table><div class="breadcrumb"><a href="Welcome.html">Welcome</a><a href=""></a> &raquo; <a href="ApiReference_NotificationReceptorAPIArticle.html">The Notification Receptor API</a> &raquo; <strong>Elements of a
	Notification Message</strong></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h1 class="topictitle">Elements of a
	Notification Message</h1></div></div></div><p> Notification messages sent with either the REST or SOAP transports contain the following elements: </p><div class="itemizedlist"><ul type="disc"><li><p> a <em class="parameter"><code>Signature</code></em> and <em class="parameter"><code>Timestamp</code></em> that verify the
				notification message is coming from Amazon Mechanical Turk </p></li><li><p> the <em class="parameter"><code>Version</code></em> of the notification API used for the message </p></li><li><p> one or more <em class="parameter"><code>Event</code></em> data structures that describe recent activity for
				HITs of a HIT type </p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d0e20660">How You Know Amazon Mechanical Turk Sent the Message</h2></div></div></div><p> Similar to how you include a <em class="parameter"><code>Signature</code></em> parameter with your requests to
			the Amazon Mechanical Turk Requester service that proves it is you, and not somebody else, sending the
			request, Amazon Mechanical Turk includes a <em class="parameter"><code>Signature</code></em> with each notification
			message. The signature value is calculated in the same way: Amazon Mechanical Turk produces a string by
			concatenating several values from the notification message, then calculates a Keyed-Hashing for
			Message Authentication code (HMAC) with the SHA-1 hashing method using a key known only to your
			application and Amazon Mechanical Turk: your AWS Secret Access Key. </p><p> To verify the signature in a notification message: </p><div class="orderedlist"><ol type="1"><li><p> Produce a string by concatenating the following values: </p><div class="itemizedlist"><ul type="disc"><li><p>the string "AWSMechanicalTurkRequesterNotification" (the "service" name)</p></li><li><p>the string "Notify" (the "operation" name)</p></li><li><p>the value of the <em class="parameter"><code>Timestamp</code></em> parameter included in the
							notification message</p></li></ul></div></li><li><p> Calculate an RFC 2104-compliant HMAC, using your AWS Secret Access Key as the key. This
					is the same method you use to sign your requests to Amazon Mechanical Turk, and could be
					performed using similar code. </p></li><li><p> Base64 encode the HMAC value. (This is also similar to request signing.) </p></li><li><p> Compare the result to the <em class="parameter"><code>Signature</code></em> value included in the
					notification message. A matching value indicates the notification message is genuine.
				</p></li></ol></div><p> For more information about the method used to produce signature values, see MakingRequests_RequestAuthenticationArticle. </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d0e20704">The Notification API Version</h2></div></div></div><p> Similar to how a REST request sent to the Amazon Mechanical Turk Requester service must include a
				<em class="parameter"><code>Version</code></em> parameter to indicate which version of the service API the
			client is expecting to use, a notification message also contains a <em class="parameter"><code>Version</code></em>
			parameter. This version string will be identical to the version included in the notification
			specification for the HIT type. </p><p> For notifications sent over the SOAP transport, the version will be in the message header as
			part of the WSDL URL. See <a class="link" href="ApiReference_NotificationReceptorAPI_SOAPTransportArticle.html" title="The SOAP Transport">The SOAP Transport</a> for more
			information. </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p> Your application may need to accommodate receiving notification messages of different
				versions at the same time if you want to upgrade your notification specifications to a new
				version without missing messages. You can avoid having to accommodate multiple API versions by
				first disabling the notification specifications that use the old version, upgrading your
				application to use the new version, then updating the notification specifications to use the
				new version and re-enable notifications. </p></td></tr></table></div><p> When a new version of the notification API is made available, all existing notification
			specifications will continue to use the API versions they were using previously. You must update
			your notification specifications to use a new version of the API. </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="d0e20724">Events</h2></div></div></div><a class="indexterm" name="d0e20727"></a><p> A notification message describes one or more events that happened in regards to a HIT type.
			Each event includes: </p><div class="itemizedlist"><ul type="disc"><li><p>the event type (<em class="parameter"><code>EventType</code></em>), a value corresponding to the
						<em class="parameter"><code>EventType</code></em> value in the <a class="link" href="ApiReference_NotificationDataStructureArticle.html" title="Notification">notification specification
						data structure</a></p></li><li><p>the time of the event (<em class="parameter"><code>EventTime</code></em>), as a <a class="ulink" href="http://www.w3.org/TR/xmlschema-2/#dateTime" target="_blank">dateTime</a> in the Coordinated
					Universal Time time zone, such as <strong class="userinput"><code>2005-01-31T23:59:59Z</code></strong></p></li><li><p>the HIT type ID for the event (<em class="parameter"><code>HITTypeId</code></em>)</p></li><li><p>the HIT ID for the event (<em class="parameter"><code>HITId</code></em>)</p></li><li><p>the assignment ID for the event, if applicable
				(<em class="parameter"><code>AssignmentId</code></em>)</p></li></ul></div><p> Multiple events may be batched into a single notification message. </p><p> Amazon Mechanical Turk may send a "Ping" event to your notification receptor at any time. "Ping"
			events are for diagnostic purposes, and do not correspond to HIT activity. </p></div></div><div class="navfooter"><table width="100%" summary="Navigation footer" cellspacing="0" cellpadding="2"><tr><td width="30%" align="left"><a accesskey="p" href="ApiReference_NotificationAPI_BuildingANotificationReceptor.html"><img src="images/prev.gif" alt="Prev"></a> </td><td width="40%" align="center"><a href="http://survey.amazonwebservices.com/survey/s?s=559&amp;opdata_page=Mturk_API_2008-08-02_ApiReference_NotificationAPI_ElementsOfANotification">Documentation Feedback</a><br><a href="copyrightinfo.html">Copyright Information</a></td><td width="30%" align="right"> <a accesskey="n" href="ApiReference_NotificationReceptorAPI_RESTTransportArticle.html"><img src="images/next.gif" alt="Next"></a></td></tr><tr><td width="30%" align="left" valign="top">&nbsp;</td><td width="40%" align="center"><a accesskey="h" href="#top"><img src="images/home.gif" alt="Home"></a></td><td width="30%" align="right" valign="top">&nbsp;</td></tr></table></div></body></html>